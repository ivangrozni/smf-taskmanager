
http://custom.simplemachines.org/mods/index.php?mod=2445
 ___________________________
|                           |
|  gledam package-info.xml  |
|___________________________|

Ugotoviti je treba strukturo mod-ov. Ta fajl je top priority.
http://www.simplemachines.org/community/index.php?topic=299669.0

tags: <id>, <name>, <version>, <type> ~ self explanatory
      <install>
      <readme>
      <modification>
      <require-file> To-DoList.php, To-DoList.template.php
      <database> database.php

Za preurediti so fajli:
   - modification.xml - zelo pomemben fajl
   - To-DoList.php ima 319 vrstic
   - To-DoList.template.php
   - datebase.php

 ___________________________
|                           |
|  gledam modification.xml  |
|___________________________|

Pomemben tag: <file>
              <operation>

php funkcija: get_today_todos()

 ________________________
|                        |
|  gledam To-DoList.php  |
|________________________|

funkcije: - ToDo() - bolj ne razumem...
          - ToDoMain()
          - add()
          - add2() - dejansko dodaja
          - didChange()
          - delete() - izbrise task s seznama

 _________________________________
|                                 |
|  gledam To-DoList.template.php  |
|_________________________________|

Kratek file. View! 

funkcije: - template_main() - template_show_list in gumbek add
          - template_add() - 

 _______________________
|                       |
|  gledam datebase.php  |
|_______________________|

Ce bi naredil DESCRIBE - bi dobil zelo preprosto bazo:
id_todo   INT(10) PRIM auto_increment 
id_member INT(10)
subject   CHAR(50)
duedate   DATE
priority  TINYINT(2)
is_did    TINYINT(2)

_________________________________________________________

Kaj se rabimo v iskri?

 projekt, rok, opis, izvrsevalec(-i), zac_dat, komentar, konc_dat

Katere funkcije?

 sprejem_naloge, zakljucek_naloge

Torej - za zacetek bi rekel da baze projektov ne potrebujemo - projekti bodo tako veliki, da bodo itq imeli vec threadov v forumu, najbrz...

__________________________________________________________

BAZA - urejena kronolosko 

id_todo       INT(10) PRIM auto_increment   |  
id_todo_sec   INT(10)                       |  default = 0 poveca se s st izvrsevalcev
id_autor      INT(10)                       |  avtor naloge
task          CHAR(50)                      |  ime naloge
*project      CHAR(50)                      |  h kateremu projektu pase
description   CHAR(250)                     |  opis naloge
start_date    DATE                          |  kdaj je treba nalogo zaceti izvrsevati
end_date      DATE                          |  rok
priority      TINYINT(2)                    |  0 - low, 1 - normal, 2 - high
*thread       INT(10) FK                    |  tag k threadu

is_did        TINYINT(2)                    |  stanje: 0prazno,1vteku,2zakljuceno,3preklic
id_member     INT(10)                       |  izvrsevalec naloge

finish_date      DATE                       |  datum zakljucka naloge
end_comment   CHAR(250)                     |  komentar ob zakljucku naloge

AKCIJE

 add_task
 accept
 task_finished

VIEWS
 empty_tasks
 emptyAndInProgres_tasks
 finished_tasks
 timeline


__________ ________________________ __________
          |                        |
          |   Manual instalation   |   
          |________________________|

./index.php
Find: [Select]

        'theme' => array('Themes.php', 'ThemesMain'),

Replace With: [Select]

              'theme' => array('Themes.php', 'ThemesMain'),
                      'todo' => array('To-DoList.php', 'ToDo'),


./Sources/ManagePermissions.php
Find: [Select]

                'karma_edit' => array(false, 'general', 'moderate_general'),

Replace With: [Select]

                'karma_edit' => array(false, 'general', 'moderate_general'),
                                'view_todo' => array(false, 'general', 'view_todolist'),
                                               'add_new_todo' => array(false, 'general', 'add_new_todolist'),


./Sources/Subs.php
Find: [Select]

      $context['allow_memberlist'] = allowedTo('view_mlist');

Replace With: [Select]

        $context['allow_memberlist'] = allowedTo('view_mlist');
        $context['allow_view_todolist'] = allowedTo('view_todo');


Find: [Select]
  'mlist' => array(
       'title' => $txt['members_title'],

Replace With: [Select]
   'todo' => array(
        'title' => function_exists('get_today_todos') ? get_today_todos() :  '',
        'href' => $scripturl . '?action=todo', 'show' => $context['allow_view_todolist'],
        'sub_buttons' => array(
           'add' => array(
           'title' => $txt['to_do_add'],
           'href' => $scripturl . '?action=todo;sa=add',
           'show' => allowedTo('add_new_todo'),
           'is_last' => true,
            ), ), ),
     'mlist' => array(
     'title' => $txt['members_title'],

Find: [Select]
?>

Replace With: [Select]

function get_today_todos()
{
        global $txt, $smcFunc;

        $month = date('n');
        $day = date('j');

        $request = $smcFunc['db_query']('', '
                 SELECT COUNT(duedate)
                        FROM {db_prefix}to_dos
                             WHERE is_did = {int:is_did}
                                          AND MONTH(duedate) = {int:month}
                                                 AND DAYOFMONTH(duedate) = {int:day}
                                                 AND YEAR(duedate) > {int:year}',
               array(
                   'is_did' => 0,
                   'year' => 1,
                   'month' => $month,
                   'day' => $day,
                   ));
          list($todays_todos) = $smcFunc['db_fetch_row']($request);
          $smcFunc['db_free_result']($request);
            return $txt['to_do'] . ' [<strong>' . $todays_todos . '</strong>]';
}
?>


./Themes/default/languages/Modifications.english.php
Find (at the end of the file): [Select]

?>

Add Before: [Select]

$txt['to_do'] = 'To-Do List';
$txt['to_do_actions'] = 'Actions';
$txt['to_do_empty'] = !$context['user']['is_admin'] ? 'To-Do List is empty!' : 'To-Do List is empty! Are you free man? :)';
$txt['to_do_del'] = 'Delete';
$txt['to_do_subject'] = 'Subject';
$txt['to_do_due_time'] = 'Due date';
$txt['to_do_due_year'] = 'Year (YYYY)';
$txt['to_do_due_month'] = 'Month (MM)';
$txt['to_do_due_day'] = 'Day (DD)';
$txt['to_do_priority'] = 'Priority';
$txt['to_do_priority0'] = 'Low';
$txt['to_do_priority1'] = 'Normal';
$txt['to_do_priority2'] = 'High';
$txt['to_do_add'] = 'Add';
// Permissions
$txt['permissionname_view_todo'] = 'View To-Do List';
$txt['permissionhelp_view_todo'] = 'This permission allows users to view To-Do List.';
$txt['permissionname_add_new_todo'] = 'Can add new to-do(s)';
$txt['permissionhelp_add_new_todo'] = 'This permission allows users to can add new To-Do(s).';
// Errors
$txt['to_do_empty_fields'] = 'You left the subject/due date field(s) empty.';
$txt['cannot_view_todolist'] = 'Sorry, but you aren\'t allowed to view To-Do List.';
$txt['cannot_add_new_todolist'] = 'Sorry, but you aren\'t allowed to add new To-Do(s).';


./Themes/default/languages/Modifications.turkish.php
Find (at the end of the file): [Select]

?>

Add Before: [Select]

$txt['to_do'] = 'Yapýlacak Listesi';
$txt['to_do_actions'] = 'Ýþlemler';
$txt['to_do_empty'] = 'Yapýlacak listesi boþ.';
$txt['to_do_add'] = 'Yeni yapýlacak notu ekle';
$txt['to_do_del'] = 'Sil';
$txt['to_do_subject'] = 'Konu';
$txt['to_do_due_time'] = 'Sonlanma Tarihi';
$txt['to_do_due_year'] = 'Yýl (YYYY)';
$txt['to_do_due_month'] = 'Ay (MM)';
$txt['to_do_due_day'] = 'Gün (DD)';
$txt['to_do_priority'] = 'Öenm';
$txt['to_do_priority0'] = 'Düþük';
$txt['to_do_priority1'] = 'Normal';
$txt['to_do_priority2'] = 'Yüksek';
$txt['to_do_add'] = 'Ekle';
// Permissions
$txt['permissionname_view_todo'] = 'Yapýacal Listesi\'ni görebilir';
$txt['permissionhelp_view_todo'] = 'Bu izin, kullanýcýlarýn Yapýlacak Listesi\'ni görebilmerine olanak tanýr.';
$txt['permissionname_add_new_todo'] = 'Yeni yapýlacak notlarý ekleyebilir';
$txt['permissionhelp_add_new_todo'] = 'Bu izin, kullanýcýlarýn Yapýlacak Listesi\'ne yeni yapýlacak notlarý ekleyebilmelerine olanak tanýr.';
// Errors
$txt['to_do_empty_fields'] = 'Konu/Sonlanma Tarihi alanýný boþ býraktýnýz.';
$txt['cannot_view_todolist'] = 'Yapýlacak Listesi\'ni göremezsiniz.';
$txt['cannot_add_new_todolist'] = 'Yapýlacak Listesi\'ne yeni yapýlacak notlarý ekleyemezsiniz.';


Code
datebase.php
This file should be able to execute standalone.
File Operations
Move the included file "To-DoList.php" to "./Sources".
Move the included file "To-DoList.template.php" to "./Themes/default".
